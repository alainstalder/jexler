apply plugin: 'application'

dependencies {
  compile 'org.jruby:jruby:1.6.8'
  compile files('jars/cron4j-2.2.5.jar')
  compile files('jars/commons-io-2.4.jar')
  runtime files('src/main/resources')
}

jar {
  manifest {
    attributes 'Implementation-Title': 'jexler-jar', 'Implementation-Version': version
  }
}

mainClassName = "net.jexler.JexlerCli"

// currently no other way to set a java property in installApp start scripts
// (need it for defining location of log files in logback config)
startScripts {
  doLast {
    unixScript.text = unixScript.text.replace('APP_HOME="`pwd -P`"',
        'APP_HOME="`pwd -P`"\nDEFAULT_JVM_OPTS="-Dnet.jexler.cli.home=$APP_HOME"')
    windowsScript.text = windowsScript.text.replace('set APP_HOME=%DIRNAME%..',
        'set APP_HOME=%DIRNAME%..\r\nset DEFAULT_JVM_OPTS=-Dnet.jexler.cli.home=%APP_HOME%')
  }
}
